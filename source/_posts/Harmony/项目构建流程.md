---
title: 项目构建流程
tags: Harmony 
toc: true
---





- hvigorconfig.ts：根目录下存在一份，可用于hvigor生命周期刚开始时操作某些数据
- hvigorfile.ts：每个node都有一份，构建的必须文件，在此文件中可以注册插件、任务以及生命周期hook等操作
- hvigor-ohos-plugin：默认的构建插件，为任务（Task）的完成提供业务逻辑支持，比如hvigor提供Hap、Har和Hsp打包服务等任务


## hvigor生命周期

- 初始化：根据命令参数和hvigor-config.json5中的配置，构造出hvigor对象和hvigorConfig对象；执行根目录下的hvigorconfig.ts
- 配置：执行每个node中的hvigorfile.ts文件，为每个node添加plugin，执行apply方法；构造出DAG图
- 执行：执行选定的任务

![](./lifecycle1.png)


官方指导：

- [https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-build-V5](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-build-V5)

- [构建系统生命周期](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-life-cycle-V5)


```shell

# 命令行参数-p buildMode指定编译模式，比如指定"release"编译模式，构建entry模块的HAP包
hvigorw --mode module -p product=default -p module=entry@default -p buildMode=release  -p debuggable=false assembleHap


# 查看所有任务
hvigorw tasks

hvigorw taskTree
```